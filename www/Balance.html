<!DOCTYPE html>
<html>
	<head>

		<script src="../widgetutils.js" type="text/javascript"></script>
		<link href='https://fonts.googleapis.com/css?family=PT+Sans' rel='stylesheet' type='text/css'></link>


	</head>

<body onresize="resize()">


	<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
		 viewBox="0 0 182 132" enable-background="new 0 0 182 132" xml:space="preserve">
			<g id="Layer_1">
			<g>
				<path fill="#dddddd" stroke="#000000" stroke-width="3" stroke-miterlimit="10" d="M33.5,83.8c0-32.4,26.2-58.6,58.6-58.6
					s58.6,26.2,58.6,58.6"/>
				<line fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" x1="11.4" y1="83.8" x2="172.8" y2="83.8"/>
				<line fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" x1="92.1" y1="30.1" x2="92.1" y2="40.8"/>
				<line fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" x1="127.6" y1="45" x2="120.1" y2="52.5"/>
				<line fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" x1="56.1" y1="45.2" x2="63.6" y2="52.8"/>
				<line fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" x1="41" y1="75.2" x2="51.7" y2="75.2"/>
				<line fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" x1="132.7" y1="75.2" x2="143.3" y2="75.2"/>
			</g>
			
				<text transform="matrix(1 0 0 1 32.9864 115.2379)" fill="#000000" stroke="#000000" stroke-miterlimit="10" font-family="'PT Sans', sans-serif" font-size="30">BALANCE</text>
		</g>
		<g id="needle">
			<g id="pad">
				<path  stroke-width="3" stroke-miterlimit="10" d="M98.9,81.8c0.4,3.7-3,6.8-6.8,6.8c-3.7,0-7.2-3.1-6.8-6.8
					c0.9-7.4,6.8-29,6.8-29S98,74.4,98.9,81.8z"/>
			</g>
		</g>


	</svg>




	<style>

	#pad {
		
		
		
	    stroke:#000000;
	    transform-origin: 50% 80%;
	    transform: rotate(0deg);
	    transition: all ease 1s;

	}

	#needle {

		transform-origin: 50% 80%;
		transform: rotate(0deg);
	}

	</style>

	<script>

		function init_widget(datahub) {

			console.log(widgetutils.paramArray);

			var server = widgetutils.paramArray["server"];
			var topic = widgetutils.paramArray["topic"];
			var subproperty = widgetutils.paramArray["subproperty"];
			var max = widgetutils.paramArray["max"];

			var appserver = datahub.getdatasource("op-en_appserver",server);

			//Bind text and animation to data. 
			appserver.bind_topic_to_html(document.getElementById("value"),topic,subproperty,"");
			//appserver.bind_topic_to_style
			appserver.bind_topic_to_rotation(document.getElementById("pad"), topic,false,subproperty,[0,max],[0,180],true);

		}

		widgetutils.init();


	</script>

</body>



